/**
 * Minified by jsDelivr using UglifyJS v3.0.24.
 * Original file: /npm/pubsubJS@1.0.0/pubsub.js
 * 
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
function loader(e){"use strict";function n(e,n,i,s){var l=this;return function(r){return t.call(l,e,n[r],i,s)}}function i(e,n,i){return function(t){u&&console.debug("[ps] triggering "+t.id+" ("+i+")",t,n);try{return e?t.callback.call(t,n,i):t.callback.apply(t,[i].concat(n))}catch(e){console.error("[ps] trigger error "+t.id+" ("+i+")",t,n)}}}function t(e,s,l,r){var c,o=e.length,a=this,u=s;for(c=0;c<o&&u;c++){var h=e[c];""!==h&&("*"!==h?(u.hasOwnProperty("*")&&(c<o-1&&u["*"]._&&u["*"]._.map(i(this.useCall,l,r)),t.call(a,e.slice(c+1),u["*"],l,r)),u=u[h]):Object.keys(u).map(n.call(a,e.slice(c+1),u,l,r)))}c===o&&u&&u._&&u._.map(i(this.useCall,l,r))}function s(n,i,t,l,r){var c,o=n.length,u=this,h=i;for(c=0;c<o;c++){var p=n[c];if("*"===p)return h["*"]||(h["*"]={}),e.uniq(r.concat(s.call(u,n.slice(c+1),h["*"],t,l,r)));h[p]||(h[p]={}),h=h[p]}h._||(h._=[]);var d;return this._availableIds.length>0?(d=this._availableIds.pop(),this._lookupById[d]=l):(d=a++,this._lookupById.push(l)),h._.push({id:d,callback:t,channel:l}),r.push(d),e.uniq(r)}function l(e){var n=e.split("/");return""===n[0]&&(n=n.slice(1)),n}function r(){this.useCall=!0,this.subscriptions={},this._lookupById=[],this._availableIds=[]}function c(n,i,t){var s=this;if(t)if(1===i.length){var l=i[0],r=t[l];r._&&(e.each(r._,function(e){s._lookupById[e.id]=!1,s._availableIds.push(e.id)}),r._=!1),0!==Object.keys(r).length&&e.each(r,function(e){e&&c.call(s,n.concat(i),[key],r)}),delete t[l]}else if(i.length>1){var o=i.pop();c.call(s,n.push(o),i,t[i[o]])}}function o(n){var i,t,s,r,o,a,h=this,p=h._lookupById.length,d=!1,b=0;e.each(n.sort(),function(n){if(a=n<p&&h._lookupById[n])if(u&&console.debug("[ps][unsubscribe] removing id <"+n+"> in channel '"+a+"'"),b=0,r&&a===d)t=e.reject(t,{id:n});else{t&&r&&r._&&(r._=t),i=l(a),s=i.length,r=h.subscriptions;do{o=r,r=r[i[b++]]}while(r&&b<s);r?(b===s&&r._&&0===(t=e.reject(r._,{id:n})).length&&1===Object.keys(r).length&&(c.call(h,i.splice(0,i.length-1),[i[i.length-1]],o),r=!1),h._lookupById[n]=!1,h._availableIds.push(n)):console.warn("[ps][unsubscribe] cannot find path <"+a+">"),d=a}else u&&console.debug("[ps][unsubscribe] skipping id <"+n+">")}),t&&r&&i&&r._&&t.length!==r._.length&&(r._=t)}var a=0,u=!1;return r.prototype.publish=function(e,n){if(!e||""===e)return!1;var i=l(e);return u&&console.debug("[ps] Publishing '"+e+"'",n),t.call(this,i,this.subscriptions,n,e)},r.prototype.subscribe=function(e,n){if(!e||""===e)return-1;var i=l(e),t=s.call(this,i,this.subscriptions,n,e,[]);return u&&console.debug("[ps] Subscribing '"+e+"', "+t.length+"' handler(s) created",t),0===t.length?-1:1===t.length?t[0]:t},r.prototype.unsubscribe=function(e){if(u&&console.debug("[ps] unsubscribing",e),void 0!==e&&null!==e)if("string"==typeof e){var n=l(e);if(n.length>0){var i=n.pop();c.call(this,n,[i],this.subscriptions)}}else o.call(this,e instanceof Array?e:[e])},new r}"function"==typeof define&&define.amd?define(["lib/lodash"],loader):window.ps=loader(_);
//# sourceMappingURL=/sm/cc9a8bdd2cdc9a05e4de1d4299faa90452a0ae5b4b545e0d52c69d4f12ca47e5.map